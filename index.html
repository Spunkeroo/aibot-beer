<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>aibot.beer ‚Äî Beer recommender, brewery finder & tasting notes generator</title>
  <meta name="description" content="AI-powered beer recommendations, brewery finder, and tasting notes. Find your perfect beer, discover local breweries, and expand your palate.">
  <meta name="keywords" content="AI beer recommender, brewery finder, beer tasting notes, craft beer AI, beer bot">
  <meta property="og:title" content="aibot.beer ‚Äî BeerBot">
  <meta property="og:description" content="AI-powered beer recommendations, brewery finder, and tasting notes. Find your perfect beer, discover local breweries, and expand your palate.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://aibot.beer">
  <meta property="og:image" content="https://aibot.beer/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@SpunkArt13">
  <meta name="twitter:title" content="BeerBot ‚Äî aibot.beer">
  <meta name="twitter:description" content="Beer recommender, brewery finder & tasting notes generator">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç∫</text></svg>">
  <link rel="canonical" href="https://aibot.beer">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"BeerBot","url":"https://aibot.beer","description":"AI-powered beer recommendations, brewery finder, and tasting notes. Find your perfect beer, discover local breweries, and expand your palate.","applicationCategory":"UtilityApplication","operatingSystem":"Web"}</script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    :root{
      --bg:#050508;--surface:#0a0a12;--card:#0e0e18;--card-hover:#121220;
      --border:#1a1a2e;--text:#e8e8f0;--dim:#8888a0;--muted:#555568;
      --accent:#d97706;--accent-glow:rgba(217,119,6,0.12);
      --green:#10b981;--red:#ef4444;
    }
    html{scroll-behavior:smooth;}
    body{background:var(--bg);color:var(--text);font-family:'Inter',-apple-system,sans-serif;line-height:1.7;-webkit-font-smoothing:antialiased;display:flex;flex-direction:column;min-height:100vh;}
    a{color:var(--accent);text-decoration:none;transition:opacity 0.2s;}
    a:hover{opacity:0.85;}

    /* NAV */
    .nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.95);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);}
    .nav-inner{max-width:1000px;margin:0 auto;padding:0.7rem 1.5rem;display:flex;align-items:center;justify-content:space-between;gap:1rem;}
    .nav-logo{font-size:1.1rem;font-weight:900;letter-spacing:-0.5px;display:flex;align-items:center;gap:0.4rem;}
    .nav-logo .accent{color:var(--accent);}
    .nav-right{display:flex;align-items:center;gap:1rem;}
    .nav-uses{font-size:0.75rem;color:var(--dim);font-weight:600;}
    .nav-uses span{color:var(--accent);font-weight:800;}
    .nav-upgrade{background:var(--accent);color:#fff;padding:0.4rem 0.9rem;border-radius:8px;font-size:0.75rem;font-weight:700;border:none;cursor:pointer;transition:all 0.2s;}
    .nav-upgrade:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(217,119,6,0.3);}

    /* NETWORK BAR */
    .site-bar{border-bottom:1px solid var(--border);padding:0.6rem 1.5rem;display:flex;justify-content:center;gap:1.2rem;flex-wrap:wrap;overflow-x:auto;}
    .site-link{display:flex;align-items:center;gap:0.3rem;font-size:0.7rem;font-weight:700;color:var(--dim);transition:color 0.2s;white-space:nowrap;}
    .site-link:hover{color:var(--text);}
    .site-link .dot{width:5px;height:5px;border-radius:50%;display:inline-block;}

    /* MAIN CHAT AREA */
    .chat-container{flex:1;max-width:800px;width:100%;margin:0 auto;padding:1rem 1.5rem;display:flex;flex-direction:column;}

    /* WELCOME */
    .welcome{text-align:center;padding:3rem 0 2rem;flex-shrink:0;}
    .welcome-icon{font-size:3rem;margin-bottom:0.5rem;}
    .welcome h1{font-size:2.2rem;font-weight:900;letter-spacing:-1.5px;margin-bottom:0.3rem;}
    .welcome h1 .gr{background:linear-gradient(135deg,var(--accent),#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
    .welcome p{color:var(--dim);font-size:0.95rem;max-width:500px;margin:0 auto 1.5rem;}
    .examples{display:flex;flex-wrap:wrap;gap:0.5rem;justify-content:center;}
    .example-btn{background:var(--card);border:1px solid var(--border);color:var(--dim);padding:0.5rem 1rem;border-radius:10px;font-size:0.8rem;font-family:inherit;cursor:pointer;transition:all 0.2s;max-width:280px;text-align:left;}
    .example-btn:hover{border-color:var(--accent);color:var(--text);}
    @media(max-width:600px){.welcome h1{font-size:1.7rem;}}

    /* MESSAGES */
    .messages{flex:1;overflow-y:auto;padding:1rem 0;display:flex;flex-direction:column;gap:1rem;}
    .msg{max-width:85%;padding:1rem 1.2rem;border-radius:14px;font-size:0.88rem;line-height:1.6;animation:fadeIn 0.3s ease;}
    .msg-user{background:var(--accent);color:#fff;align-self:flex-end;border-bottom-right-radius:4px;}
    .msg-bot{background:var(--card);border:1px solid var(--border);align-self:flex-start;border-bottom-left-radius:4px;position:relative;}
    .msg-bot .msg-actions{display:flex;gap:0.5rem;margin-top:0.75rem;padding-top:0.5rem;border-top:1px solid var(--border);}
    .msg-action{background:var(--surface);border:1px solid var(--border);color:var(--dim);padding:0.3rem 0.7rem;border-radius:6px;font-size:0.7rem;font-family:inherit;cursor:pointer;transition:all 0.2s;}
    .msg-action:hover{border-color:var(--accent);color:var(--text);}
    .typing{display:flex;gap:4px;padding:1rem;align-self:flex-start;}
    .typing span{width:8px;height:8px;background:var(--muted);border-radius:50%;animation:bounce 1.4s infinite;}
    .typing span:nth-child(2){animation-delay:0.2s;}
    .typing span:nth-child(3){animation-delay:0.4s;}
    @keyframes bounce{0%,60%,100%{transform:translateY(0);}30%{transform:translateY(-8px);}}
    @keyframes fadeIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}

    /* INPUT */
    .input-area{padding:1rem 0;border-top:1px solid var(--border);flex-shrink:0;}
    .input-wrap{display:flex;gap:0.5rem;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:0.5rem;transition:border-color 0.2s;}
    .input-wrap:focus-within{border-color:var(--accent);}
    .input-wrap input{flex:1;background:transparent;border:none;color:var(--text);font-size:0.9rem;font-family:inherit;padding:0.4rem 0.6rem;outline:none;}
    .input-wrap input::placeholder{color:var(--muted);}
    .send-btn{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:0.5rem 1rem;font-weight:700;font-size:0.85rem;cursor:pointer;transition:all 0.2s;font-family:inherit;}
    .send-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(217,119,6,0.3);}
    .send-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none;box-shadow:none;}

    /* PAYWALL MODAL */
    .modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);z-index:500;display:none;align-items:center;justify-content:center;padding:1.5rem;}
    .modal-overlay.active{display:flex;}
    .modal{background:var(--card);border:1px solid var(--border);border-radius:16px;max-width:500px;width:100%;padding:2rem;text-align:center;position:relative;}
    .modal-close{position:absolute;top:1rem;right:1rem;background:var(--surface);border:1px solid var(--border);color:var(--dim);width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1rem;}
    .modal-close:hover{color:var(--text);border-color:var(--accent);}
    .modal h2{font-size:1.4rem;font-weight:900;margin-bottom:0.5rem;}
    .modal p{color:var(--dim);font-size:0.85rem;margin-bottom:1.5rem;}
    .pricing-cards{display:flex;gap:0.75rem;margin-bottom:1.5rem;}
    .price-card{flex:1;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:1rem;cursor:pointer;transition:all 0.2s;}
    .price-card:hover,.price-card.featured{border-color:var(--accent);}
    .price-card.featured{position:relative;}
    .price-card.featured::before{content:'BEST VALUE';position:absolute;top:-8px;left:50%;transform:translateX(-50%);background:var(--accent);color:#fff;font-size:0.55rem;font-weight:800;padding:0.15rem 0.5rem;border-radius:4px;letter-spacing:1px;}
    .price-card .pc-price{font-size:1.4rem;font-weight:900;color:var(--text);}
    .price-card .pc-period{font-size:0.7rem;color:var(--dim);display:block;}
    .price-card .pc-desc{font-size:0.7rem;color:var(--muted);margin-top:0.3rem;}
    .pay-btn{width:100%;padding:0.7rem;border-radius:10px;font-weight:700;font-size:0.9rem;border:none;cursor:pointer;transition:all 0.2s;font-family:inherit;margin-bottom:0.5rem;}
    .pay-btn-stripe{background:var(--accent);color:#fff;}
    .pay-btn-stripe:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(217,119,6,0.3);}
    .pay-btn-crypto{background:var(--surface);border:1px solid var(--border);color:var(--text);}
    .pay-btn-crypto:hover{border-color:var(--accent);}
    .crypto-details{display:none;text-align:left;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:1rem;margin-top:0.5rem;}
    .crypto-details.active{display:block;}
    .crypto-addr{font-family:'JetBrains Mono',monospace;font-size:0.65rem;color:var(--accent);word-break:break-all;cursor:pointer;padding:0.4rem;background:var(--bg);border-radius:6px;margin:0.3rem 0;}
    .crypto-label{font-size:0.7rem;color:var(--dim);font-weight:600;margin-top:0.5rem;}
    .modal-ref{font-size:0.75rem;color:var(--dim);margin-top:1rem;}
    .modal-ref a{color:var(--accent);}
    @media(max-width:500px){.pricing-cards{flex-direction:column;}}

    /* FOOTER */
    .footer{border-top:1px solid var(--border);padding:1.5rem;text-align:center;}
    .footer-links{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;margin-bottom:0.75rem;}
    .footer-links a{color:var(--muted);font-size:0.7rem;font-weight:600;}
    .footer-links a:hover{color:var(--text);}
    .footer-copy{font-size:0.65rem;color:var(--muted);}
  </style>
</head>
<body>

<!-- GA -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GVNL11PEGP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-GVNL11PEGP');</script>

<!-- NAV -->
<nav class="nav">
  <div class="nav-inner">
    <div class="nav-logo">üç∫ <span class="accent">BeerBot</span></div>
    <div class="nav-right">
      <div class="nav-uses">Uses today: <span id="useCount">0</span> / <span id="useMax">3</span></div>
      <button class="nav-upgrade" onclick="showPaywall()">Upgrade</button>
    </div>
  </div>
</nav>

<!-- NETWORK BAR -->
<div class="site-bar">
  <a href="https://aibot.beer" class="site-link" style="color:var(--text);"><span class="dot" style="background:#d97706;"></span>üç∫ aibot.beer</a>
  <a href="https://aibot.coupons" class="site-link"><span class="dot" style="background:#10b981;"></span>üè∑Ô∏è aibot.coupons</a>
  <a href="https://aibot.courses" class="site-link"><span class="dot" style="background:#14b8a6;"></span>üéì aibot.courses</a>
  <span style="color:var(--muted);padding:0 0.3rem;">|</span>
  <a href="https://spunk.bet" class="site-link" target="_blank" rel="noopener"><span class="dot" style="background:#ff5f1f;"></span>üé∞ spunk.bet</a>
  <a href="https://predict.pics" class="site-link" target="_blank" rel="noopener"><span class="dot" style="background:#a855f7;"></span>üîÆ predict.pics</a>
  <a href="https://scam.video" class="site-link" target="_blank" rel="noopener"><span class="dot" style="background:#ef4444;"></span>üì∫ scam.video</a>
  <a href="https://stimulant.wiki" class="site-link" target="_blank" rel="noopener"><span class="dot" style="background:#8b5cf6;"></span>üìñ stimulant.wiki</a>
</div>

<!-- CHAT CONTAINER -->
<div class="chat-container">
  <!-- WELCOME -->
  <div class="welcome" id="welcome">
    <div class="welcome-icon">üç∫</div>
    <h1>Beer<span class='gr'>Bot</span></h1>
    <p>Find your perfect beer, discover breweries, and get AI-generated tasting notes. Your personal beer sommelier.</p>
    <div class="examples">
      <button class="example-btn" onclick="askExample(this.textContent)">I like Blue Moon ‚Äî what else would I enjoy?</button>
      <button class="example-btn" onclick="askExample(this.textContent)">Best craft breweries in Portland, Oregon</button>
      <button class="example-btn" onclick="askExample(this.textContent)">Explain the difference between IPA, APA, and NEIPA</button>
      <button class="example-btn" onclick="askExample(this.textContent)">What beer pairs best with BBQ brisket?</button>
    </div>
  </div>

  <!-- MESSAGES -->
  <div class="messages" id="messages"></div>

  <!-- INPUT -->
  <div class="input-area">
    <div class="input-wrap">
      <input type="text" id="userInput" placeholder="e.g., Recommend a beer similar to Guinness but less bitter" autocomplete="off">
      <button class="send-btn" id="sendBtn" onclick="sendMessage()">Ask BeerBot</button>
    </div>
  </div>
</div>

<!-- PAYWALL MODAL -->
<div class="modal-overlay" id="paywallModal" onclick="if(event.target===this)closePaywall()">
  <div class="modal">
    <div class="modal-close" onclick="closePaywall()">‚úï</div>
    <h2>üç∫ Unlock Unlimited BeerBot</h2>
    <p>You've used your 3 free daily queries. Upgrade for unlimited access.</p>
    <div class="pricing-cards">
      <div class="price-card" onclick="selectPlan('day')" id="planDay">
        <div class="pc-price">$2.99</div>
        <span class="pc-period">24-hour pass</span>
        <div class="pc-desc">Unlimited for today</div>
      </div>
      <div class="price-card featured" onclick="selectPlan('month')" id="planMonth">
        <div class="pc-price">$9.99</div>
        <span class="pc-period">per month</span>
        <div class="pc-desc">Unlimited across ALL bots</div>
      </div>
    </div>
    <button class="pay-btn pay-btn-stripe" onclick="payStripe()">Pay with Card</button>
    <button class="pay-btn pay-btn-crypto" onclick="toggleCrypto()">Pay with Crypto</button>
    <div class="crypto-details" id="cryptoDetails">
      <div class="crypto-label">Bitcoin (BTC)</div>
      <div class="crypto-addr" onclick="copyAddr(this)" title="Click to copy">bc1pkepg42ctsvsxk499qu02qqyyz88gwjchnjpsu22wmng9rhpfv3jqw2t2hm</div>
      <div class="crypto-label">Ethereum (ETH)</div>
      <div class="crypto-addr" onclick="copyAddr(this)" title="Click to copy">0xD2aC89253b5F20f5b03b5B591297Fa4FCC37d41c</div>
      <div style="font-size:0.65rem;color:var(--muted);margin-top:0.5rem;">Send exact amount + email us at contact@spunkart.com for activation</div>
    </div>
    <div class="modal-ref">
      Share &amp; earn! <a href="#" onclick="shareRef();return false;">Get your referral link</a> ‚Äî 5 free uses for you and your friend.
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-links" style="margin-bottom:0.3rem">
    <a href="https://aibot.beer">aibot.beer</a>
    <a href="https://aibot.coupons">aibot.coupons</a>
    <a href="https://aibot.courses">aibot.courses</a>
  </div>
  <div class="footer-links" style="margin-bottom:0.3rem;font-size:0.6rem">
    <a href="https://predict.pics">predict.pics</a>
    <a href="https://predict.horse">predict.horse</a>
    <a href="https://predict.mom">predict.mom</a>
    <a href="https://scam.video">scam.video</a>
    <a href="https://scam.wiki">scam.wiki</a>
    <a href="https://stimulant.wiki">stimulant.wiki</a>
    <a href="https://spunk.bet" style="color:#ff5f1f">spunk.bet</a>
    <a href="https://spunkart.com">spunkart.com</a>
  </div>
  <div class="footer-links">
    <a href="https://aibot.coupons">aibot.coupons</a>
    <a href="https://aibot.courses">aibot.courses</a>
    <a href="https://stake.com/?c=MyXSehCn" target="_blank" rel="noopener sponsored" style="color:#1475e1;font-size:0.65rem;font-weight:700;text-decoration:none;">Stake.com</a>
    <a href="https://stake.us/?c=L2a8nG6c" target="_blank" rel="noopener sponsored" style="color:#00c74d;font-weight:600;">Stake.us</a>
    <a href="https://winna.com/?r=Spunkeroo" target="_blank" rel="noopener sponsored" style="color:#ff5f1f;font-weight:600;">Winna.com</a>
    <a href="https://coinbase.com/join/YAGES3X?src=referral-link" target="_blank" rel="noopener sponsored" style="color:#0052ff;font-weight:600;">Buy Crypto</a>
    <a href="https://shop.ledger.com/?r=0553c9ea1441" target="_blank" rel="noopener sponsored" style="color:#ff5500;font-weight:600;">Secure Crypto</a>
    <a href="https://kalshi.com/sign-up/?referral=6b723b42-d0c9-4421-9b4e-5af4b4c6c42c" target="_blank" rel="noopener sponsored" style="color:#00d084;font-weight:600;">Kalshi</a>
    <a href="https://everyx.io/register?ref=AYHl4YqvjcaX" target="_blank" rel="noopener sponsored" style="color:#a855f7;font-weight:600;">EveryX</a>
    <a href="https://spunk.bet" target="_blank" rel="noopener sponsored" style="color:#ff5f1f;font-weight:600;">Spunk.Bet</a>
    <a href="https://x.com/SpunkArt13" target="_blank" rel="noopener noreferrer">@SpunkArt13</a>
  </div>
  <div class="footer-copy">&copy; 2026 aibot.beer ‚Äî BeerBot by @SpunkArt13 | <a href="https://spunkart.com">SpunkArt.com</a></div>
</footer>

<script>
// ============================================================
// CONFIG
// ============================================================
const BOT_NAME = 'BeerBot';
const DOMAIN = 'aibot.beer';
const SLUG = 'beer';
const SHARE_TEXT = 'BeerBot picked my next beer and it was perfect! üç∫';
const SYSTEM_PROMPT = `You are BeerBot, an AI beer expert and sommelier. Recommend beers based on user preferences, find breweries, generate tasting notes, explain beer styles, suggest food pairings, and help users expand their palate. Cover craft, import, and domestic beers. Include ABV, IBU, and flavor profiles when relevant. Be fun and knowledgeable.`;
const FREE_USES = 3;
const REFERRAL_BONUS = 5;

// ============================================================
// USAGE TRACKING (localStorage + fingerprint)
// ============================================================
function getToday() {
  return new Date().toISOString().split('T')[0];
}

function getUsage() {
  const data = JSON.parse(localStorage.getItem('aibot_usage') || '{}');
  if (data.date !== getToday()) {
    data.date = getToday();
    data.count = 0;
    localStorage.setItem('aibot_usage', JSON.stringify(data));
  }
  return data;
}

function incrementUsage() {
  const data = getUsage();
  data.count++;
  localStorage.setItem('aibot_usage', JSON.stringify(data));
  updateUsageDisplay();
  return data.count;
}

function getRemainingUses() {
  const data = getUsage();
  const bonus = parseInt(localStorage.getItem('aibot_bonus') || '0');
  const maxUses = FREE_USES + bonus;
  return maxUses - data.count;
}

function isPaid() {
  const sub = JSON.parse(localStorage.getItem('aibot_subscription') || '{}');
  if (sub.type === 'month' && new Date(sub.expires) > new Date()) return true;
  if (sub.type === 'day' && new Date(sub.expires) > new Date()) return true;
  return false;
}

function updateUsageDisplay() {
  const data = getUsage();
  const bonus = parseInt(localStorage.getItem('aibot_bonus') || '0');
  const maxUses = FREE_USES + bonus;
  document.getElementById('useCount').textContent = data.count;
  document.getElementById('useMax').textContent = isPaid() ? '‚àû' : maxUses;
}

// ============================================================
// CHAT FUNCTIONALITY
// ============================================================
const messagesEl = document.getElementById('messages');
const welcomeEl = document.getElementById('welcome');
const inputEl = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');

function askExample(text) {
  inputEl.value = text;
  sendMessage();
}

async function sendMessage() {
  const text = inputEl.value.trim();
  if (!text) return;

  // Check usage
  if (!isPaid() && getRemainingUses() <= 0) {
    showPaywall();
    return;
  }

  // Hide welcome, show messages
  welcomeEl.style.display = 'none';

  // Add user message
  addMessage(text, 'user');
  inputEl.value = '';
  sendBtn.disabled = true;

  // Show typing indicator
  const typingEl = showTyping();

  // Increment usage
  incrementUsage();

  // Generate AI response (simulated ‚Äî replace with real API call)
  try {
    const response = await generateResponse(text);
    typingEl.remove();
    addBotMessage(response);
  } catch (err) {
    typingEl.remove();
    addBotMessage("Sorry, I'm having trouble right now. Please try again in a moment.");
  }

  sendBtn.disabled = false;
  inputEl.focus();
}

function addMessage(text, type) {
  const msg = document.createElement('div');
  msg.className = `msg msg-${type}`;
  msg.textContent = text;
  messagesEl.appendChild(msg);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function addBotMessage(text) {
  const msg = document.createElement('div');
  msg.className = 'msg msg-bot';

  // Format response (basic markdown-like formatting)
  let formatted = text
    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
    .replace(/\n- /g, '\n‚Ä¢ ')
    .replace(/\n\n/g, '<br><br>')
    .replace(/\n/g, '<br>');

  msg.innerHTML = `
    <div>${formatted}</div>
    <div class="msg-actions">
      <button class="msg-action" onclick="shareOnX('${encodeURIComponent(text.substring(0, 100))}')">Share on X</button>
      <button class="msg-action" onclick="copyResponse(this)">Copy</button>
    </div>
  `;
  messagesEl.appendChild(msg);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function showTyping() {
  const typing = document.createElement('div');
  typing.className = 'typing';
  typing.innerHTML = '<span></span><span></span><span></span>';
  messagesEl.appendChild(typing);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return typing;
}

// ============================================================
// AI RESPONSE GENERATION
// ============================================================
// This generates intelligent responses client-side for the free tier.
// For production, replace with actual API calls to Claude/OpenAI.
async function generateResponse(query) {
  // Simulate API delay
  await new Promise(r => setTimeout(r, 1000 + Math.random() * 1500));

  // Smart template-based responses (free tier)
  // Replace this entire function with real API call for paid tier:
  //
  // const res = await fetch('/api/chat', {
  //   method: 'POST',
  //   headers: {'Content-Type': 'application/json'},
  //   body: JSON.stringify({ message: query, system: SYSTEM_PROMPT })
  // });
  // const data = await res.json();
  // return data.response;

  return generateSmartResponse(query);
}

function generateSmartResponse(query) {
  const q = query.toLowerCase();
  const responses = getResponses();

  // Try to match keyword-based responses (check all, pick best match)
  let bestMatch = null;
  let bestScore = 0;
  for (const [keywords, response] of responses) {
    const score = keywords.filter(k => q.includes(k)).length;
    if (score > bestScore) { bestScore = score; bestMatch = response; }
  }
  if (bestMatch) return bestMatch;

  // Smart default ‚Äî analyze query and generate contextual response
  return generateContextualBeerResponse(query);
}

function generateContextualBeerResponse(query) {
  const q = query.toLowerCase();
  const words = q.split(/\s+/);

  // Detect if asking about a specific beer brand
  const brands = {'budweiser':'American lager','bud light':'light lager','coors':'American lager','miller':'American lager','heineken':'Euro pale lager','corona':'Mexican lager','modelo':'Mexican lager','guinness':'Irish stout','blue moon':'Belgian wit','stella':'Belgian pilsner','sam adams':'Boston lager','sierra nevada':'pale ale','lagunitas':'IPA','dogfish':'IPA','stone':'IPA','bells':'variety','founders':'variety','goose island':'variety','new belgium':'variety','fat tire':'amber ale','pbr':'American lager','pabst':'American lager','yuengling':'American amber lager','dos equis':'Mexican lager','tecate':'Mexican lager','sapporo':'Japanese rice lager','asahi':'Japanese rice lager','kirin':'Japanese rice lager','peroni':'Italian lager','pilsner urquell':'Czech pilsner','hoegaarden':'Belgian wit','chimay':'Belgian trappist','duvel':'Belgian golden strong','orval':'Belgian pale ale','weihenstephaner':'German wheat','paulaner':'German wheat/lager','spaten':'German lager','ayinger':'German variety','trillium':'NEIPA','tree house':'NEIPA','other half':'NEIPA','monkish':'NEIPA'};
  for (const [brand, style] of Object.entries(brands)) {
    if (q.includes(brand)) {
      return `**${brand.split(' ').map(w=>w[0].toUpperCase()+w.slice(1)).join(' ')} ‚Äî ${style}**\n\nGreat choice! Here's what you should know:\n\n**Style:** ${style}\n**ABV:** Typically ${style.includes('lager')?'4-5%':style.includes('IPA')?'6-7%':style.includes('stout')?'4-6%':'5-7%'}\n**Best Served:** ${style.includes('lager')||style.includes('pilsner')?'Ice cold (35-40¬∞F)':style.includes('stout')||style.includes('trappist')?'Cellar temp (50-55¬∞F)':'Cool (45-50¬∞F)'}\n\n**Similar Beers to Try:**\n- ${style.includes('lager')?'Pilsner Urquell, Modelo Especial, Sapporo':style.includes('IPA')?'Pliny the Elder, Heady Topper, Haze Jude':style.includes('stout')?'Left Hand Milk Stout, Samuel Smith Oatmeal Stout, Founders Breakfast Stout':style.includes('wit')||style.includes('wheat')?'Allagash White, Weihenstephaner, Hoegaarden':'Chimay Red, Duvel, Orval'}\n\n**Pro Tip:** Try this beer in a proper glass ‚Äî ${style.includes('lager')?'pilsner glass':style.includes('IPA')?'tulip or IPA glass':style.includes('stout')?'pint or snifter':style.includes('Belgian')?'tulip or chalice':'pint glass'} ‚Äî it makes a real difference in aroma and flavor.\n\nWant more recommendations like this? Just tell me what flavors you enjoy!`;
    }
  }

  // Detect style questions
  const styles = {'stout':['Guinness','Left Hand Milk Stout (nitro)','Founders Breakfast Stout','North Coast Old Rasputin','Samuel Smith Oatmeal Stout'],'porter':['Founders Porter','Deschutes Black Butte','Anchor Porter','Great Lakes Edmund Fitzgerald','Smuttynose Robust Porter'],'lager':['Pilsner Urquell','Modelo Especial','Victory Prima Pils','Firestone Pivo Pils','Sapporo Premium'],'pilsner':['Pilsner Urquell','Victory Prima Pils','Firestone Pivo Pils','Trumer Pils','Rothaus Pils'],'wheat':['Weihenstephaner Hefeweizen','Allagash White','Blue Moon','Hoegaarden','Paulaner Hefe-Weissbier'],'sour':['Rodenbach Grand Cru','Duchesse de Bourgogne','Anderson Valley Gose','Almanac Sournova','Prairie Artisan Ales'],'amber':['Fat Tire','Alaskan Amber','New Belgium Amber','Tr√∂egs Nugget Nectar','Bell\'s Amber Ale'],'brown ale':['Newcastle Brown Ale','Cigar City Maduro','Big Sky Moose Drool','Smuttynose Old Brown Dog','Avery Ellie\'s Brown'],'belgian':['Chimay Red','Duvel','Orval','Westmalle Tripel','La Trappe Quadrupel'],'saison':['Saison Dupont','Boulevard Tank 7','Allagash Saison','Hennepin','Jolly Pumpkin Bam Biere']};
  for (const [style, beers] of Object.entries(styles)) {
    if (q.includes(style)) {
      return `**${style.charAt(0).toUpperCase()+style.slice(1)} Guide**\n\n**What is a ${style}?**\n${style==='stout'?'Dark, roasty beer with coffee/chocolate flavors. Can range from dry (Guinness) to sweet (milk stout) to boozy (imperial stout).':style==='porter'?'Dark, malty beer ‚Äî the ancestor of stout. Smoother and less roasty than stout, with chocolate and caramel notes.':style==='lager'?'Clean, crisp, bottom-fermented beer. The world\'s most popular style. Ranges from light (pilsner) to dark (schwarzbier).':style==='pilsner'?'The original lager ‚Äî crisp, bitter, golden. Czech pilsners are maltier, German pilsners are drier and more bitter.':style==='wheat'?'Light, refreshing, often hazy. German hefeweizen has banana/clove flavors. Belgian witbier has orange peel and coriander.':style==='sour'?'Intentionally tart/acidic beer. Ranges from lightly tart (gose, berliner weisse) to intensely sour (lambic, Flanders red).':style==='amber'?'Medium-bodied, balanced malt and hops. Caramel and toffee flavors. A crowd-pleaser for any occasion.':style==='belgian'?'Complex, fruity, spicy beers from Belgian brewing traditions. Trappist ales are brewed by monks. Often higher ABV.':style==='saison'?'Belgian farmhouse ale ‚Äî dry, effervescent, spicy, fruity. Perfect for warm weather and food pairing.':'A versatile beer style with a range of flavors.'}\n\n**Top 5 to Try:**\n${beers.map((b,i)=>`${i+1}. ${b}`).join('\n')}\n\n**Best Glass:** ${style==='stout'||style==='porter'?'Pint glass or snifter':style==='belgian'||style==='saison'?'Tulip or chalice':style==='wheat'?'Weizen glass':style==='pilsner'?'Pilsner glass':'Standard pint'}\n**Best Temp:** ${style==='stout'||style==='porter'||style==='belgian'?'50-55¬∞F (cellar temp)':'40-50¬∞F (cool)'}\n\nWant food pairing suggestions for ${style}s? Just ask!`;
    }
  }

  // Brewing-related questions
  if (q.match(/brew|homebrew|make beer|make my own/)) {
    return `**Homebrewing Starter Guide**\n\n**Equipment Needed (~$80-150 starter kit):**\n- 5-gallon brewing kettle\n- Fermenter (bucket or carboy) with airlock\n- Bottling bucket + bottles + caps\n- Thermometer + hydrometer\n- Sanitizer (Star San)\n\n**Easiest First Brew:** Extract kit (pre-made malt extract)\n1. Boil water + malt extract (60 min)\n2. Add hops at scheduled intervals\n3. Cool to 70¬∞F, transfer to fermenter\n4. Add yeast, seal with airlock\n5. Wait 2 weeks (fermentation)\n6. Bottle with priming sugar\n7. Wait 2 more weeks (carbonation)\n8. Drink!\n\n**Best Starter Kits:**\n- Northern Brewer Essential Kit ($70)\n- Brooklyn Brew Shop 1-gallon kit ($45)\n- MoreBeer Premium Kit ($150)\n\n**Best Style for Beginners:** Amber ale or wheat beer ‚Äî forgiving, hard to mess up, tastes great.\n\n**Pro Tip:** Sanitation is 90% of good homebrewing. Clean everything that touches your beer after the boil.`;
  }

  // ABV/alcohol questions
  if (q.match(/abv|alcohol|strong|percent|drunk|light beer|session/)) {
    return `**Beer ABV Guide**\n\n**By Strength:**\n- **Session (3-4.5%):** Founders All Day IPA, Guinness Draught (4.2%), most light beers\n- **Standard (4.5-6%):** Most lagers, pale ales, wheat beers\n- **Strong (6-9%):** IPAs, Belgian dubbels, Scotch ales\n- **Very Strong (9-13%):** Imperial stouts, barleywines, Belgian quads\n- **Extreme (13%+):** Eisbock, barrel-aged imperials, specialty brews\n\n**Strongest Beers in the World:**\n- Snake Venom (67.5% ABV)\n- Brewmeister Armageddon (65%)\n- Schorschbr√§u 57 (57%)\n\n**Lightest Beers (under 100 cal):**\n- Michelob Ultra (4.2%, 95 cal)\n- Corona Premier (4%, 90 cal)\n- Dogfish Head Slightly Mighty (4%, 95 cal)\n- Lagunitas DayTime (4%, 98 cal)\n\n**Rule of Thumb:** One 5% beer = one glass of wine = one shot of liquor.\n\n**Pro Tip:** Higher ABV doesn't mean better. Some of the world's best beers are 4-5%.`;
  }

  // Generic beer question ‚Äî actually helpful response
  const topic = query.substring(0, 60);
  const randomRecs = [
    ['Sierra Nevada Pale Ale','A gateway craft beer ‚Äî balanced, citrusy, endlessly drinkable'],
    ['Pilsner Urquell','The original pilsner since 1842 ‚Äî crisp, golden, perfect'],
    ['Weihenstephaner Hefeweizen','From the world\'s oldest brewery (1040 AD) ‚Äî banana, clove, refreshing'],
    ['Chimay Red','Trappist ale brewed by Belgian monks ‚Äî fruity, complex, 7% ABV'],
    ['Founders All Day IPA','Session IPA at 4.7% ‚Äî hop flavor without the hangover']
  ];
  const picks = randomRecs.sort(() => Math.random() - 0.5).slice(0, 3);

  return `**BeerBot's Take on: "${topic}"**\n\nI'd love to help with that! Here's my best advice:\n\n**Quick Answer:**\nThe beer world is vast ‚Äî there are 100+ recognized styles, thousands of breweries, and millions of opinions. What matters most is what YOU enjoy. Don't let anyone tell you your beer is wrong.\n\n**My Top 3 Picks Right Now:**\n${picks.map((p,i) => `${i+1}. **${p[0]}** ‚Äî ${p[1]}`).join('\n')}\n\n**Ways I Can Help:**\n- "Recommend a beer like [beer you enjoy]"\n- "Best beer for [food]"\n- "Explain [beer style]"\n- "Best breweries near [city]"\n- "Compare [beer A] vs [beer B]"\n\n**Try being more specific and I'll give you an expert answer!**`;
}

function getResponses() {
  return [
  [["ipa", "pale ale", "hoppy", "bitter", "hazy", "neipa", "juicy"], `**IPA Guide ‚Äî Decoding the Hops**\n\n**IPA Sub-Styles:**\n1. **West Coast IPA**: Clear, bitter, piney/citrusy. Try: Pliny the Elder, Lagunitas IPA\n2. **New England IPA (NEIPA)**: Hazy, juicy, low bitterness. Try: Tree House Julius, Trillium Congress Street\n3. **American Pale Ale**: Lighter, more balanced. Try: Sierra Nevada Pale Ale, Firestone 805\n4. **Double/Imperial IPA**: Higher ABV (7-10%). Try: Heady Topper, Hop Stoopid\n5. **Session IPA**: Low ABV (4-5%), easy drinking. Try: Founders All Day IPA\n\n**If New to IPAs:** Start with NEIPA (less bitter) or APA (lighter).\n\n**IBU Guide:** 20-40 mild | 40-60 moderate | 60-100+ very bitter`],
  [["recommend", "similar", "like", "enjoy", "suggest", "what should", "try next"], `**Personalized Beer Recommendations**\n\n**If you like Blue Moon** ‚Üí Allagash White, Hoegaarden\n**If you like Guinness** ‚Üí Left Hand Milk Stout (nitro), Samuel Smith Oatmeal Stout\n**If you like Corona** ‚Üí Modelo Especial, Pacifico, craft Mexican lagers\n**If you like craft IPAs** ‚Üí Tell me hazy or clear!\n**If you like Bud Light** ‚Üí Pilsner Urquell, Victory Prima Pils\n**If you like hard seltzer** ‚Üí Gose (sour wheat beer), Berliner Weisse\n\n**Expanding Your Palate:**\n1. Start with what you know\n2. Move one style adjacent (lager ‚Üí pilsner ‚Üí pale ale ‚Üí IPA)\n3. Try a flight at a local brewery\n4. Use Untappd app to track what you've tried`],
  [["pair", "food", "meal", "match", "eat", "dinner", "lunch", "pizza", "steak", "burger", "chicken", "fish", "cheese"], `**Beer & Food Pairing Guide**\n\n**Classic Pairings:**\n- **BBQ/Burgers**: Amber ale, brown ale, porter\n- **Pizza**: Pale ale or pilsner\n- **Steak**: Stout, porter, or barleywine\n- **Seafood/Fish**: Pilsner, wheat beer, saison\n- **Spicy Food**: IPA or wheat beer\n- **Cheese**: Belgian dubbel + aged cheddar, saison + goat cheese\n- **Dessert**: Imperial stout + chocolate, fruit sour + cheesecake\n- **Fried Food**: Pilsner or pale ale (carbonation cuts grease)\n- **Salad**: Saison, witbier, or gose\n\n**The Rules:** Match intensity + complement OR contrast flavors.`],
  [["cheap", "budget", "affordable", "best value", "bang for buck", "inexpensive"], `**Best Beers on a Budget**\n\n**Under $10/six-pack:**\n- Modelo Especial ‚Äî Best cheap lager\n- PBR ‚Äî Ironically good, actually solid\n- Yuengling ‚Äî America's oldest brewery, great value\n- Narragansett ‚Äî Classic, underrated\n- Tecate ‚Äî Crisp Mexican lager\n\n**Best Craft Value (under $12/six-pack):**\n- Sierra Nevada Pale Ale\n- Founders All Day IPA\n- Bell's Two Hearted\n- Oskar Blues Dale's Pale Ale\n- New Belgium Fat Tire\n\n**Pro Tips:**\n- Buy variety packs (try 4+ styles, same price)\n- Trader Joe's house brands are excellent ($5-7/six-pack)\n- Costco Kirkland craft beer variety = great deal`],
  [["gift", "present", "birthday", "christmas"], `**Beer Gift Guide**\n\n**For Beginners:** Brewery sampler pack (Sierra Nevada, Sam Adams variety)\n**For IPA Lovers:** Pliny the Elder (if you can find it), or a fresh local NEIPA\n**For the Adventurous:** Belgian variety box (Chimay, Duvel, Orval)\n**For the Collector:** Aged barleywine or imperial stout (cellars for years)\n\n**Beyond Beer:**\n- Craft beer subscription (Tavour, CraftShack)\n- Brewery tour / tasting experience\n- Custom pint glasses or growler\n- Beer making kit ($45-150)\n- Untappd Insider subscription\n\n**Price Guide:** $15 for a nice bomber, $30-50 for a gift set, $50-100 for a subscription`],
  [["brewery", "brewpub", "taproom", "visit", "tour", "near me", "best brewery"], `**Finding Great Breweries**\n\n**America's Top Breweries (2026):**\n1. **Tree House** (Charlton, MA) ‚Äî NEIPA kings\n2. **Hill Farmstead** (Greensboro, VT) ‚Äî World's best\n3. **Trillium** (Boston, MA) ‚Äî Hazy IPA perfection\n4. **Other Half** (Brooklyn, NY) ‚Äî Creative, bold IPAs\n5. **Allagash** (Portland, ME) ‚Äî Belgian-style excellence\n6. **Russian River** (Santa Rosa, CA) ‚Äî Pliny the Elder!\n7. **Sierra Nevada** (Chico, CA) ‚Äî The OG craft brewery\n8. **Bell's** (Kalamazoo, MI) ‚Äî Two Hearted Ale\n9. **Founders** (Grand Rapids, MI) ‚Äî KBS, All Day IPA\n10. **Monkish** (Torrance, CA) ‚Äî LA's haze lords\n\n**How to Find Local Breweries:** BeerMenus.com, Untappd, Google Maps "brewery near me"\n\n**Tip:** Visit on a weekday for smaller crowds and fresh taps.`],
  [["calories", "carbs", "diet", "keto", "healthy", "weight", "low calorie"], `**Beer & Health Guide**\n\n**Lowest Calorie Beers:**\n- Michelob Ultra: 95 cal, 2.6g carbs\n- Corona Premier: 90 cal, 2.6g carbs\n- Dogfish Slightly Mighty: 95 cal, 3.6g carbs\n- Lagunitas DayTime: 98 cal, 3g carbs\n\n**Keto-Friendly (under 3g carbs):**\n- Michelob Ultra (2.6g)\n- Corona Premier (2.6g)\n- Miller Lite (3.2g ‚Äî close)\n\n**Healthiest Beer Choices:**\n1. Lower ABV = fewer calories (always)\n2. Dry/brut IPAs and pilsners = lower carbs\n3. Gueuze/lambic = probiotic benefits\n4. Stouts = iron and antioxidants\n\n**Rule of Thumb:** ~150 cal per 12oz regular beer. Light beers ~100 cal.`],
  [["glass", "pour", "serve", "temperature", "draft", "tap", "bottle", "can"], `**How to Serve Beer Properly**\n\n**Glass Guide:**\n- **Pilsner glass**: Lagers, pilsners (shows clarity + carbonation)\n- **Pint glass**: Ales, porters, stouts (standard all-purpose)\n- **Tulip**: IPAs, Belgian ales (concentrates aroma)\n- **Snifter**: Imperial stouts, barleywines (swirl + smell)\n- **Weizen glass**: Wheat beers (tall, shows haze)\n- **Chalice**: Belgian trappist ales (wide, ceremonial)\n\n**Temperature Guide:**\n- **35-40¬∞F**: Light lagers, pilsners (ice cold)\n- **40-45¬∞F**: Pale ales, IPAs, wheat beers\n- **45-50¬∞F**: Ambers, Belgian ales, bocks\n- **50-55¬∞F**: Stouts, porters, barleywines (cellar temp)\n\n**Pouring:** 45¬∞ angle, straighten as glass fills. Aim for 1-1.5 inch head.`]
];
}

// ============================================================
// SHARE & REFERRAL
// ============================================================
function shareOnX(preview) {
  const text = `${SHARE_TEXT}\n\nTry it free: https://${DOMAIN}?ref=${getRefCode()}\n\n@SpunkArt13`;
  window.open(`https://x.com/intent/tweet?text=${encodeURIComponent(text)}`, '_blank');
  if (typeof gtag === 'function') gtag('event', 'share_x', { bot: SLUG });
}

function copyResponse(btn) {
  const text = btn.closest('.msg-bot').querySelector('div').textContent;
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = 'Copy', 2000);
  });
}

function getRefCode() {
  let code = localStorage.getItem('aibot_ref_code');
  if (!code) {
    code = SLUG + '_' + Math.random().toString(36).substring(2, 10);
    localStorage.setItem('aibot_ref_code', code);
  }
  return code;
}

function shareRef() {
  const url = `https://${DOMAIN}?ref=${getRefCode()}`;
  navigator.clipboard.writeText(url).then(() => alert('Referral link copied! Share it to earn 5 bonus uses.'));
}

// Check for referral on load
(function checkRef() {
  const params = new URLSearchParams(window.location.search);
  const ref = params.get('ref');
  if (ref && !localStorage.getItem('aibot_ref_used')) {
    const bonus = parseInt(localStorage.getItem('aibot_bonus') || '0');
    localStorage.setItem('aibot_bonus', bonus + REFERRAL_BONUS);
    localStorage.setItem('aibot_ref_used', ref);
    if (typeof gtag === 'function') gtag('event', 'referral_activated', { ref_code: ref, bot: SLUG });
  }
})();

// ============================================================
// PAYWALL
// ============================================================
let selectedPlan = 'month';

function showPaywall() {
  document.getElementById('paywallModal').classList.add('active');
  selectPlan('month');
}

function closePaywall() {
  document.getElementById('paywallModal').classList.remove('active');
}

function selectPlan(plan) {
  selectedPlan = plan;
  document.getElementById('planDay').style.borderColor = plan === 'day' ? 'var(--accent)' : 'var(--border)';
  document.getElementById('planMonth').style.borderColor = plan === 'month' ? 'var(--accent)' : 'var(--border)';
}

function payStripe() {
  // Placeholder ‚Äî integrate Stripe Checkout
  // window.location.href = `https://checkout.stripe.com/...?plan=${selectedPlan}`;
  alert('Stripe payments coming soon! For now, use crypto or contact @SpunkArt13 on X.');
}

function toggleCrypto() {
  document.getElementById('cryptoDetails').classList.toggle('active');
}

function copyAddr(el) {
  navigator.clipboard.writeText(el.textContent).then(() => {
    const orig = el.textContent;
    el.textContent = 'Copied!';
    setTimeout(() => el.textContent = orig, 2000);
  });
}

// ============================================================
// INIT
// ============================================================
updateUsageDisplay();

inputEl.addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

// Referral tracking
const urlParams = new URLSearchParams(window.location.search);
const ref = urlParams.get('ref');
if (ref) {
  localStorage.setItem('aibot_ref', ref);
  if (typeof gtag === 'function') gtag('event', 'referral_visit', { referral_code: ref, source: SLUG });
}
</script>
</body>
</html>